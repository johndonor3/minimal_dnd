{% extends "layout.html" %}
{% set active_page = "char" %}
{% block head %}

{% endblock head %}


{% block body %}

<script type="text/javascript">

function updateHP(delta, name){
    const form = document.createElement('form');
    form.method = "post";
    form.action = "/character/".concat(name, ".html");
    console.log(form.action)

    const hiddenField = document.createElement('input');
    hiddenField.type = 'hidden';
    hiddenField.name = "hp";
    hiddenField.value = delta;
    form.appendChild(hiddenField);
    
    document.body.appendChild(form);
    form.submit();
}

function handleClick(evt) {
  var node = evt.target;
  if (node.value == 'hp_p') {
    updateHP(1, node.name);
  }
  else if (node.value == 'hp_m') {
    updateHP(-1, node.name);
  }
}

</script>

<div class="row">
        <div align=center><h1>Character info for {{name}}</h1></div>
    <div class="row">
        <div align=center>
        <div class="well">
        <!--     <div class="col-md-2">
            </div> 
            <div class="col-md-5"> -->
            <table class="table" onclick="handleClick(event);">
                <col width="50">
                <col width="50">
                <col width="20">
                <col width="100">
                <col width="80">
                <tr>
                <td align="center"><b>AC</b></th>
                <td align="center"><b>HP</b></th>
                <td align="center">
                    <button type="button" name={{name}} value="hp_p">+</button>
                </th>
                <td align="center"><b>Initiative</b></th>
                <td align="center"><b>Speed</b></th>
                </tr>
                <tr>
                <td align="center"><b>{{ac}}</b></th>
                <td align="center"><b>{{hp}}</b></th>
                    <td align="center">
                    <button type="button" name={{name}} value="hp_m">-</button>
                </th>
                <td align="center"><b>{{initiative}}</b></th>
                <td align="center"><b>{{speed}}</b></th>
                </tr>
            </table>
            <!-- </div>
            <div class="col-md-3">
            </div> -->
        </div>
        </div>
    </div>
</div>

{% endblock body %}